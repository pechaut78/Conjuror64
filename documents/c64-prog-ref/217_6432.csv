question,answer
"What is one way to use machine language routines from BASIC on the Commodore 64?","The BASIC SYS statement"
"How does the BASIC SYS statement work?","The BASIC statement SYS X causes a JUMP to a machine language subroutine located at address X."
"What is the purpose of the RTS instruction in a machine language routine?","The routine must end with an RTS instruction to return control back to BASIC."
"How are parameters passed between the machine language routine and the BASIC program?","Parameters are generally passed between the machine language routine and the BASIC program using the BASIC PEEK and POKE statements, and their machine language equivalents."
"What is the most useful method of combining BASIC with machine language?","The SYS command is the most useful method of combining BASIC with machine language."
"How does the BASIC function USR(X) work?","The BASIC function USR(X) transfers control to the machine language subroutine located at the address stored in locations 785 and 786."
"What is the format of the address stored in locations 785 and 786?","The address is stored in standard low-byte/high-byte format."
"How is a value passed to the machine language subroutine through the USR function?","The value X is evaluated and passed to the machine language subroutine through floating point accumulator #1, located beginning at address $61."
"How is a value returned back to the BASIC program from the machine language subroutine?","A value may be returned back to the BASIC program by placing it in the floating point accumulator."
"What is the difference between the SYS and USR statements?","The SYS statement is different from the USR function because you have to set up an indirect vector, and the format through which the variable is passed is floating point format."
"How can you replace or amend a BASIC internal routine?","Any of the input/output or BASIC internal routines accessed through the vector table located on page 3 can be replaced, or amended by user code."
"What is the purpose of the KERNAL VECTOR routine?","The KERNAL VECTOR routine is the most reliable way to change any of the vectors."
"How can you change a single vector?","A single vector can be changed by POKES."
"What happens when the user routine is executed?","When the appropriate BASIC command is executed, the user routine will be executed."
"What should the user program do after executing the user routine?","If after executing the user routine, it is necessary to execute the normal system routine, the user program must JMP to the address formerly contained in the vector."
"What should the user program do if it is not necessary to execute the normal system routine?","If not, the routine must end with a RTS to transfer control back to BASIC."
"How can you change the HARDWARE INTERRUPT (IRQ) VECTOR?","The HARDWARE INTERRUPT (IRQ) VECTOR can be changed."
"What happens when the operating system transfers control to the routine specified by this vector?","Every 1/60th of a second, the operating system transfers control to the routine specified by this vector."
"What should you always do before changing the IRQ VECTOR?","ALWAYS DISABLE INTERRUPTS BEFORE CHANGING THIS VECTOR!"
"What is the purpose of the CHRGET routine?","The CHRGET routine is used by BASIC to get each character/token."
"How can you add new BASIC commands using the CHRGET routine?","This makes it simple to add new BASIC commands."
"How does the new CHRGET routine work?","The new CHRGET routine will search for the special character, and if none is present, control is passed to the normal BASIC CHRGET routine."
"What is a common way to use this method?","A common way to use this method is to specify a character (@ for example) which will occur before any of the new commands."
"What is the advantage of this technique?","This minimizes the extra execution time added by the need to search for additional commands."
"What is this technique often called?","This technique is often called a wedge."
"What is the purpose of the machine language subroutine in the CHRGET routine?","Naturally, each new command must be executed by a user written machine language subroutine."
"How do you specify a new command in the CHRGET routine?","The new CHRGET routine will search for the special character, and if the special character is present, the new command is interpreted and executed by your machine language program."